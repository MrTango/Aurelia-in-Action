{"version":3,"sources":["app.js","environment.js","index.js","main.js","resources/index.js","services/book-api.js","resources/attributes/tooltip.js","resources/elements/book-list.js","resources/elements/book-stats.js","resources/elements/book.js","resources/elements/books.js","resources/elements/edit-book.js","resources/elements/star-rating.js","resources/value-converters/book-status.js","resources/value-converters/date-format.js","renderers/bootstrap-form-renderer.js"],"names":["App","configureRouter","config","router","title","map","route","name","moduleId","debug","testing","Index","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","plugin","developmentLogging","start","then","setRoot","BookApi","http","simulatedLatency","getBooks","fetch","response","json","books","getShelves","shelves","simulateFetch","getGenres","genres","id","fetchResult","setTimeout","resolve","saveBook","book","TooltipCustomAttribute","Element","element","attached","$","tooltip","placement","detached","BookList","eventAggregator","BookStats","length","originalNumberOfBooks","Book","editMode","markRead","readDate","Date","read","removeBook","publish","toggleEditMode","event","bind","subscribeToEvents","editModeChangedSubscription","subscribe","mode","unbind","dispose","Books","bookApi","bookTitle","addBook","push","toRemove","bookIndex","findIndex","Id","splice","savedBooks","bookRemovedSubscription","bookSavedSubscription","bookSaved","updatedBook","savedBook","EditBook","of","controller","temporaryBook","resetTempBook","addRenderer","editingShelves","ratingChangedListener","rating","e","loadGenres","loadShelves","ratingElement","addEventListener","validate","selectedGenre","find","g","genre","selectedGenreChanged","newValue","oldValue","editModeChanged","editModeNew","editModeOld","Object","assign","cancel","starRatingViewModel","applyRating","save","loading","publishBookSavedEvent","toggleEditShelves","bookSaveComplete","saved","bookSaveCompleteSubscription","removeEventListener","compareBook","isEqual","description","ensure","a","required","on","StarRating","stars","type","displayType","rated","hovered","forEach","star","index","rateStar","toggleOn","toggleOff","ratingFromIndex","rate","raiseChangedEvent","mouseOut","hoverIndex","applyHoverState","shouldApplyHover","toggleDisplayOn","toggleDisplayOff","mouseOver","starIndex","changeEvent","CustomEvent","dispatchEvent","BookStatusValueConverter","toView","value","DateFormatValueConverter","format","BootstrapFormRenderer","render","instruction","unrender","result","elements","remove","add","valid","formGroup","closest","classList","message","document","createElement","className","textContent","appendChild","querySelector","removeChild","querySelectorAll"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\r\n  configureRouter(config, router) {\r\n  this.router = router;\r\n  config.title = 'My-Books';\r\n  config.map([ \r\n   { route: ['', 'home'], name: 'home', moduleId: 'index' },\r\n   { route: 'books', name: 'books', moduleId: './resources/elements/books'},\r\n  ]);\r\n  }\r\n}","export default {\n  debug: true,\n  testing: true\n};\n","export class Index{\r\n}","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-validation');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {HttpClient} from 'aurelia-fetch-client';\r\nimport {inject} from 'aurelia-framework';\r\n\r\n@inject(HttpClient)\r\nexport class BookApi{\r\n    \r\n    constructor(http){\r\n        this.http = http;\r\n        this.simulatedLatency = 500;\r\n    }\r\n\r\n    getBooks(){\r\n\r\n        return this.http.fetch('books.json')\r\n                 .then(response => response.json())\r\n                 .then(books => {\r\n                   return books;\r\n                 });\r\n\r\n  }\r\n\r\n  getShelves(){\r\n\r\n    let shelves = [\r\n                    'Classics',\r\n                    'Want to read',\r\n                    'Research',\r\n                    'For the kids',\r\n                 ];\r\n                \r\n    return this.simulateFetch(shelves);\r\n    \r\n  }\r\n\r\n  getGenres(){\r\n\r\n    let genres = [ \r\n                  {id: 1,  name:'Art'}, \r\n                  {id: 2,  name:'Autobiographies'}, \r\n                  {id: 3,  name:'Cookbooks'}, \r\n                  {id: 4,  name:'Drama'}, \r\n                  {id: 5,  name:'Childrens'}, \r\n                  {id: 6,  name:'Fantasy'}, \r\n                  {id: 7,  name:'History'}, \r\n                  {id: 8,  name:'Mystery'}, \r\n                  {id: 9,  name:'Romance'}, \r\n                  {id: 10, name:'Science'}, \r\n                  {id: 11, name:'Satire'}, \r\n                  {id: 12, name:'Science Fiction'}, \r\n                  {id: 13, name:'Travel'}\r\n                ];\r\n\r\n  \r\n    return this.simulateFetch(genres);\r\n  }\r\n\r\n  simulateFetch(fetchResult){\r\n      return new Promise(resolve => {\r\n        setTimeout(() => {\r\n          resolve(fetchResult);\r\n        }, this.simulatedLatency);\r\n      });\r\n  }\r\n\r\n  saveBook(book){\r\n    return new Promise(resolve => {\r\n      setTimeout(() => {\r\n        resolve(book);\r\n      }, this.simulatedLatency);\r\n    });\r\n  }\r\n}","import {inject, bindable} from 'aurelia-framework';\r\n\r\n@inject(Element)\r\nexport class TooltipCustomAttribute{\r\n\r\n    @bindable title;\r\n    @bindable placement;\r\n\r\n    constructor(element){\r\n        this.element = element;\r\n    }\r\n\r\n    attached(){\r\n        $(this.element).tooltip({title: this.title, placement : this.placement});\r\n    }   \r\n    \r\n    detached(){\r\n        $(this.element).tooltip('dispose');\r\n    } \r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(EventAggregator)\r\nexport class BookList {\r\n  @bindable books;\r\n  \r\n  constructor(eventAggregator){\r\n    this.eventAggregator = eventAggregator;\r\n  }\r\n}","import {computedFrom, bindable} from 'aurelia-framework'; \r\n\r\nexport class BookStats{\r\n \r\n  @bindable books;\r\n  @bindable originalNumberOfBooks;\r\n\r\n  @computedFrom('originalNumberOfBooks', 'books.length')\r\n  get addedBooks(){\r\n      return this.books.length - this.originalNumberOfBooks; \r\n  }\r\n}\r\n","import {bindable, inject} from 'aurelia-framework';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(EventAggregator)\r\nexport class Book{\r\n\r\n    @bindable book;   \r\n\r\n    constructor(eventAggregator){\r\n        this.eventAggregator = eventAggregator;\r\n        this.editMode = false;\r\n    }\r\n\r\n    markRead(){\r\n        this.book.readDate = new Date();\r\n        this.book.read = true;\r\n    }\r\n\r\n    removeBook(){\r\n        this.eventAggregator.publish('book-removed', this.book);\r\n    }\r\n\r\n    toggleEditMode(event){\r\n        this.editMode = !this.editMode;\r\n    }\r\n\r\n    bind(){\r\n        this.subscribeToEvents();\r\n    }\r\n    \r\n    subscribeToEvents(){\r\n        this.editModeChangedSubscription = \r\n            this.eventAggregator.subscribe('edit-mode-changed', mode => {\r\n                                             this.editMode = mode; \r\n        });\r\n    }\r\n\r\n    unbind(){\r\n        this.editModeChangedSubscription.dispose();\r\n    }\r\n}","import {bindable, inject, computedFrom} from 'aurelia-framework';\r\nimport {BookApi} from '../../services/book-api';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport _ from 'lodash';\r\n\r\n@inject(BookApi, EventAggregator)\r\nexport class Books {\r\n\r\n  constructor(bookApi, eventAggregator){\r\n    this.bookTitle = \"\"; \r\n    this.books = [];\r\n    this.bookApi = bookApi;\r\n    this.eventAggregator = eventAggregator;\r\n  }\r\n  \r\n  addBook () {\r\n    this.books.push({title : this.bookTitle});\r\n    this.bookTitle = \"\";\r\n  }\r\n  \r\n  removeBook(toRemove){\r\n    \r\n    let bookIndex = _.findIndex(this.books, book => {\r\n      return book.Id === toRemove.Id;\r\n    });\r\n\r\n    this.books.splice(bookIndex, 1);\r\n  }\r\n\r\n  bind(){\r\n    this.bookApi.getBooks()\r\n                .then(savedBooks => \r\n                      this.books = savedBooks);\r\n  }\r\n\r\n  attached(){\r\n    this.subscribeToEvents();\r\n  }\r\n\r\n  subscribeToEvents(){\r\n      this.bookRemovedSubscription = \r\n           this.eventAggregator.subscribe('book-removed', \r\n                                bookIndex => this.removeBook(bookIndex));\r\n\r\n      this.bookSavedSubscription = \r\n      this.eventAggregator.subscribe('save-book', \r\n                                     book => this.bookSaved(book));\r\n  }\r\n\r\n  bookSaved(updatedBook){\r\n      this.bookApi\r\n          .saveBook(updatedBook)\r\n          .then((savedBook) => this.eventAggregator\r\n                                  .publish(`book-save-complete-${savedBook.Id}`));\r\n  }\r\n  \r\n  @computedFrom('bookTitle.length') \r\n  get canAdd(){\r\n      return this.bookTitle.length === 0;\r\n  }\r\n\r\n  detached(){\r\n    this.bookRemovedSubscription.dispose();\r\n    this.bookSavedSubscription.dispose();\r\n  }\r\n}\r\n","import {bindable, inject, computedFrom, NewInstance} from 'aurelia-framework';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {BookApi} from '../../services/book-api';\r\nimport {BootstrapFormRenderer} from '../../renderers/bootstrap-form-renderer';\r\nimport {ValidationRules, ValidationController} from 'aurelia-validation';\r\nimport _ from 'lodash';\r\n\r\n@inject(EventAggregator, BookApi,NewInstance.of(ValidationController) )\r\nexport class EditBook{\r\n    \r\n    @bindable editMode;\r\n    @bindable book;\r\n    @bindable selectedGenre;\r\n    temporaryBook = new Book();\r\n\r\n    constructor(eventAggregator, bookApi, controller ){\r\n        this.resetTempBook();\r\n        this.controller = controller;\r\n        this.controller.addRenderer(new BootstrapFormRenderer());\r\n\r\n        this.eventAggregator = eventAggregator;\r\n        this.bookApi = bookApi;\r\n        this.editingShelves = false;\r\n        this.ratingChangedListener =  e => this.temporaryBook.rating = e.rating;\r\n    }\r\n\r\n    bind(){\r\n\r\n        this.temporaryBook.rating = this.book.rating; //apply the temporary book rating once the rating value has been made available in bind hook\r\n\r\n        this.loadGenres();\r\n        this.loadShelves();\r\n\r\n        this.ratingElement.addEventListener(\"change\", this.ratingChangedListener);\r\n\r\n    }\r\n\r\n    validate(){\r\n        this.controller.validate();\r\n    }\r\n\r\n    loadGenres(){\r\n        this.bookApi.getGenres()\r\n            .then(genres =>{\r\n                this.genres = genres;\r\n                this.selectedGenre = this.genres.find(g => g.id == this.book.genre);\r\n            });\r\n    }\r\n\r\n    loadShelves(){\r\n        this.bookApi.getShelves()\r\n            .then(shelves => {\r\n                this.shelves = shelves;\r\n            });\r\n    }\r\n\r\n    selectedGenreChanged(newValue, oldValue){\r\n        if(!newValue) return;\r\n        this.temporaryBook.genre = newValue.id;\r\n    }\r\n\r\n    editModeChanged(editModeNew, editModeOld){\r\n        if(editModeNew) this.resetTempBook();\r\n    }\r\n\r\n    @computedFrom('temporaryBook.title', 'temporaryBook.description', 'temporaryBook.rating', 'temporaryBook.genre')\r\n    get canSave(){\r\n        let compareBook = Object.assign(new Book(), this.book);\r\n        return this.temporaryBook && !_.isEqual(this.temporaryBook, compareBook);\r\n    }\r\n\r\n    resetTempBook(){\r\n        Object.assign(this.temporaryBook, this.book);\r\n    }\r\n\r\n    cancel(){\r\n        this.temporaryBook = this.book;\r\n        this.starRatingViewModel.applyRating(this.temporaryBook.rating);\r\n        this.toggleEditMode();\r\n    }\r\n    \r\n    save(){\r\n        this.validate();\r\n        this.loading = true;\r\n        this.publishBookSavedEvent();\r\n        \r\n    }\r\n\r\n    toggleEditShelves(){\r\n        this.editingShelves = !this.editingShelves;\r\n    }\r\n\r\n    bookSaveComplete(){\r\n        this.loading = false;\r\n        this.saved = true;\r\n        setTimeout(() => {\r\n           this.saved = false;\r\n           this.toggleEditMode();  \r\n        }, 500);  \r\n    }\r\n\r\n    publishBookSavedEvent(){\r\n        this.eventAggregator.publish('save-book', this.temporaryBook);\r\n    }\r\n\r\n    attached(){\r\n        this.bookSaveCompleteSubscription = this.eventAggregator.subscribe(`book-save-complete-${this.book.Id}`, () =>  this.bookSaveComplete());\r\n    }\r\n\r\n    toggleEditMode(){\r\n        this.eventAggregator.publish('edit-mode-changed', !this.editMode );\r\n    }\r\n\r\n    detached(){\r\n        this.ratingElement.removeEventListener('change', this.ratingChangedListener);\r\n        this.bookSaveCompleteSubscription.dispose();\r\n    }\r\n}\r\n\r\nexport class Book {\r\n  title='';\r\n  description='';\r\n}\r\n\r\nValidationRules\r\n  .ensure(a => a.title).required()\r\n  .on(Book);\r\n  \r\n","import {inject, bindable} from 'aurelia-framework';\r\n\r\n@inject(Element) // Inject the instance of this element\r\nexport class StarRating{\r\n    \r\n    @bindable rating;\r\n\r\n    constructor(element){\r\n\r\n        this.element = element;\r\n        this.stars = [\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false }\r\n                    ];\r\n\r\n        this.hovered = false;\r\n    }\r\n\r\n    bind(){\r\n        this.applyRating(this.rating);\r\n    }\r\n\r\n    applyRating(rating){\r\n        this.stars.forEach((star, index) => \r\n                            this.rateStar(star, rating, index));\r\n    }\r\n\r\n    rateStar(star, rating, index){\r\n \r\n        if(index < rating) this.toggleOn(star);\r\n        else {\r\n            this.toggleOff(star);\r\n        }\r\n        \r\n    }\r\n\r\n    toggleOn(star){\r\n        star.displayType = '';\r\n        star.type = '';\r\n        star.rated = true;\r\n    }\r\n\r\n    toggleOff(star){\r\n        star.displayType = '-o';\r\n        star.type = '-o';\r\n        star.rated = false;\r\n    }\r\n\r\n    ratingFromIndex(index, star){\r\n\r\n        if(index === 0 && star.rated) return 0;\r\n\r\n        return index + 1;\r\n\r\n    }\r\n\r\n    rate(index){\r\n\r\n        let rating = this.ratingFromIndex(index, this.stars[0]);\r\n\r\n        this.rating = rating;\r\n        \r\n        this.applyRating(rating);\r\n        \r\n        this.raiseChangedEvent();\r\n\r\n    }\r\n\r\n    mouseOut(hoverIndex){\r\n        \r\n        if(!this.hovered) return;\r\n\r\n        this.hovered = false;\r\n\r\n        this.applyHoverState(hoverIndex);\r\n       \r\n    }\r\n\r\n    applyHoverState(hoverIndex){\r\n         this.stars.forEach((star, index) =>{\r\n            if(!this.shouldApplyHover(index, hoverIndex, star)) return;\r\n\r\n            if(this.hovered){\r\n                this.toggleDisplayOn(star);\r\n            }\r\n            else{\r\n                 this.toggleDisplayOff(star);\r\n            }\r\n        }); \r\n    }\r\n\r\n    mouseOver(hoverIndex){\r\n        if(this.hovered) return;\r\n\r\n        this.hovered = true;\r\n\r\n        this.applyHoverState(hoverIndex);\r\n    }\r\n\r\n    toggleDisplayOff(star){\r\n        star.displayType = star.type; \r\n    }\r\n\r\n    toggleDisplayOn(star){\r\n        star.displayType = '';\r\n    }\r\n\r\n    shouldApplyHover(starIndex, hoverIndex, star){\r\n        return starIndex <= hoverIndex && !star.rated;\r\n    }\r\n\r\n    raiseChangedEvent(){\r\n        let changeEvent = new CustomEvent('change', {rating: this.rating});\r\n    \r\n        this.element.dispatchEvent(changeEvent);\r\n    }\r\n}","export class BookStatusValueConverter{\r\n    toView(value) {\r\n\r\n        switch(value){\r\n            case 'bad':\r\n                return 'fa-frown-o';\r\n            case 'good':\r\n                return 'fa-smile-o';\r\n            case 'ok':\r\n                return 'fa-meh-o';\r\n        }\r\n    \r\n    }\r\n}","import moment from 'moment';\r\n\r\nexport class DateFormatValueConverter {\r\n  toView(value) {\r\n    if(!value) return '';\r\n\r\n    return moment(value).format('MM/DD/YYYY h:mm:ss a');\r\n  }\r\n}","import {\r\n  ValidationRenderer,\r\n  RenderInstruction,\r\n  ValidateResult\r\n} from 'aurelia-validation';\r\n\r\nexport class BootstrapFormRenderer {\r\n  render(instruction) {\r\n    for (let { result, elements } of instruction.unrender) {\r\n      for (let element of elements) {\r\n        this.remove(element, result);\r\n      }\r\n    }\r\n\r\n    for (let { result, elements } of instruction.render) {\r\n      for (let element of elements) {\r\n        this.add(element, result);\r\n      }\r\n    }\r\n  }\r\n\r\n  add(element, result) {\r\n    if (result.valid) {\r\n      return;\r\n    }\r\n\r\n    const formGroup = element.closest('.form-group');\r\n    if (!formGroup) {\r\n      return;\r\n    }\r\n\r\n    // add the has-error class to the enclosing form-group div\r\n    formGroup.classList.add('has-danger');\r\n\r\n    // add help-block\r\n    const message = document.createElement('div');\r\n    message.className = 'form-control-feedback';\r\n    message.textContent = result.message;\r\n    message.id = `validation-message-${result.id}`;\r\n\r\n    element.classList.add('form-control-danger');\r\n    \r\n    formGroup.appendChild(message);\r\n  }\r\n\r\n  remove(element, result) {\r\n    if (result.valid) {\r\n      return;\r\n    }\r\n\r\n    const formGroup = element.closest('.form-group');\r\n    if (!formGroup) {\r\n      return;\r\n    }\r\n\r\n    // remove help-block\r\n    const message = formGroup.querySelector(`#validation-message-${result.id}`);\r\n    if (message) {\r\n      formGroup.removeChild(message);\r\n\r\n      // remove the has-error class from the enclosing form-group div\r\n      if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {\r\n        formGroup.classList.remove('has-danger');\r\n        formGroup.classList.add('has-success');\r\n        element.classList.add('form-control-success');\r\n    \r\n      }\r\n    }\r\n  }\r\n}"],"sourceRoot":".."}