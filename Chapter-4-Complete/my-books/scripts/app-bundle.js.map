{"version":3,"sources":["app.js","environment.js","index.js","main.js","resources/index.js","services/book-api.js","resources/attributes/tooltip.js","resources/elements/add-book.js","resources/elements/book-container.js","resources/elements/book-list.js","resources/elements/book-stats.js","resources/elements/book.js","resources/elements/books.js","resources/elements/edit-book.js","resources/elements/star-rating.js","resources/value-converters/book-status.js","resources/value-converters/date-format.js"],"names":["App","configureRouter","config","router","title","map","route","name","moduleId","debug","testing","Index","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","BookApi","http","getBooks","fetch","response","json","books","saveBook","book","setTimeout","resolve","TooltipCustomAttribute","Element","element","attached","$","tooltip","placement","detached","AddBook","bookTitle","addBook","push","length","BookContainer","eventAggregator","bind","bookReadSubscription","subscribe","Id","bookId","read","unbind","dispose","BookList","bookApi","created","savedBooks","removeBook","index","splice","BookStats","originalNumberOfBooks","Book","markRead","readDate","Date","publish","toggleEditMode","event","editMode","subscribeToEvents","editModeChangedSubscription","mode","bookChanged","Books","EditBook","ratingChangedListener","temporaryBook","rating","e","detail","resetTempBook","ratingElement","addEventListener","editModeChanged","editModeNew","editModeOld","Object","assign","cancel","starRatingViewModel","applyRating","save","loading","savedBook","saved","publishBookSavedEvent","removeEventListener","isEqual","StarRating","stars","type","displayType","rated","hovered","forEach","star","rateStar","toggleOn","toggleOff","ratingFromIndex","rate","raiseChangedEvent","mouseOut","hoverIndex","applyHoverState","shouldApplyHover","toggleDisplayOn","toggleDisplayOff","mouseOver","starIndex","changeEvent","window","CustomEvent","bubbles","document","createEvent","initCustomEvent","dispatchEvent","BookStatusValueConverter","toView","value","DateFormatValueConverter","format"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\r\n  configureRouter(config, router) {\r\n  this.router = router;\r\n  config.title = 'My-Books';\r\n  config.map([ \r\n   { route: ['', 'home'], name: 'home', moduleId: 'index' },\r\n   { route: 'books', name: 'books', moduleId: './resources/elements/books'},\r\n  ]);\r\n  }\r\n}","export default {\n  debug: true,\n  testing: true\n};\n","export class Index{\r\n}","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {HttpClient} from 'aurelia-fetch-client';\r\nimport {inject} from 'aurelia-framework';\r\n\r\n@inject(HttpClient)\r\nexport class BookApi{\r\n    \r\n    constructor(http){\r\n        this.http = http;\r\n    }\r\n\r\n    getBooks(){\r\n\r\n        return this.http.fetch('books.json')\r\n                 .then(response => response.json())\r\n                 .then(books => {\r\n                   return books;\r\n                 });\r\n\r\n    }\r\n\r\n  saveBook(book){\r\n    return new Promise(resolve => {\r\n      setTimeout(() => {\r\n        resolve(book);\r\n      }, 1000);\r\n    });\r\n  }\r\n}","import {inject, bindable} from 'aurelia-framework';\r\n\r\n@inject(Element)\r\nexport class TooltipCustomAttribute{\r\n\r\n    @bindable title;\r\n    @bindable placement;\r\n\r\n    constructor(element){\r\n        this.element = element;\r\n    }\r\n\r\n    attached(){\r\n        $(this.element).tooltip({title: this.title, placement : this.placement});\r\n    }   \r\n    \r\n    detached(){\r\n        $(this.element).tooltip('dispose');\r\n    } \r\n}","import {bindable, computedFrom} from 'aurelia-framework'; \r\n\r\nexport class AddBook {\r\n  \r\n  @bindable books; \r\n\r\n  constructor(){\r\n    this.bookTitle = \"\"; \r\n  }\r\n\r\n  addBook () {\r\n    this.books.push({title : this.bookTitle});\r\n    this.bookTitle = \"\";\r\n  }\r\n\r\n   @computedFrom('bookTitle.length') \r\n   get canAdd(){\r\n       return this.bookTitle.length === 0;\r\n   }\r\n}","import {bindable, inject} from \"aurelia-framework\";\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(EventAggregator)\r\nexport class BookContainer{\r\n    @bindable book;    \r\n\r\n    constructor(eventAggregator){\r\n        this.eventAggregator = eventAggregator;\r\n    }\r\n\r\n    bind(){\r\n        this.bookReadSubscription = this.eventAggregator.subscribe('book-read', bookId => {\r\n            if(this.book.Id === bookId) this.book.read = true;\r\n        });\r\n    }\r\n\r\n    unbind(){\r\n        this.bookReadSubscription.dispose();\r\n    }\r\n}","import {bindable} from 'aurelia-framework';\r\nimport {BookApi} from '../../services/book-api';\r\nimport {inject} from 'aurelia-framework';\r\n\r\n@inject(BookApi)\r\nexport class BookList {\r\n  @bindable books;\r\n\r\n  constructor(bookApi){\r\n    this.bookApi = bookApi;\r\n  }\r\n\r\n  created(){\r\n    this.bookApi.getBooks().then(savedBooks => {\r\n\r\n      savedBooks.map(book => {\r\n        this.books.push(book);\r\n      });\r\n\r\n    });\r\n  }\r\n  \r\n  removeBook(index){\r\n      this.books.splice(index, 1);\r\n  }\r\n}","import {computedFrom, bindable} from 'aurelia-framework'; \r\n\r\nexport class BookStats{\r\n \r\n  @bindable books;\r\n  @bindable originalNumberOfBooks;\r\n\r\n  @computedFrom('originalNumberOfBooks', 'books.length')\r\n  get addedBooks(){\r\n      return this.books.length - this.originalNumberOfBooks; \r\n  }\r\n}\r\n","import {bindable, inject} from 'aurelia-framework';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(EventAggregator, Element)\r\nexport class Book{\r\n\r\n    @bindable book;   \r\n    @bindable editMode;\r\n\r\n    constructor(eventAggregator, element){\r\n        this.eventAggregator = eventAggregator;\r\n        this.element = element;\r\n    }\r\n\r\n    markRead(){\r\n        this.book.readDate = new Date();\r\n        this.eventAggregator.publish('book-read', this.book.Id);\r\n    }\r\n\r\n    removeBook(){\r\n        this.eventAggregator.publish('book-removed', this.book.Id);\r\n    }\r\n\r\n    toggleEditMode(event){\r\n        this.editMode = !this.editMode;\r\n    }\r\n\r\n    bind(){\r\n        this.subscribeToEvents();\r\n    }\r\n\r\n    subscribeToEvents(){\r\n        this.editModeChangedSubscription = this.eventAggregator.subscribe('edit-mode-changed', mode => {\r\n            this.editMode = mode; \r\n        });\r\n\r\n        this.bookChanged = this.eventAggregator.subscribe(`book-changed-${this.book.Id}`, book => {\r\n            this.book = book; \r\n        });\r\n    }\r\n\r\n    unbind(){\r\n        this.editModeChangedSubscription.dispose();\r\n        this.bookChanged.dispose();\r\n    }\r\n}","export class Books {\r\n  constructor(){\r\n    this.books = [];\r\n  }\r\n}","import {bindable, inject, computedFrom} from 'aurelia-framework';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport _ from 'lodash';\r\nimport {BookApi} from '../../services/book-api';\r\n\r\n@inject(BookApi, EventAggregator,)\r\nexport class EditBook{\r\n    \r\n    @bindable editMode;\r\n    @bindable book;\r\n\r\n    constructor(bookApi, eventAggregator){\r\n        this.eventAggregator = eventAggregator;\r\n        this.bookApi = bookApi;\r\n        this.ratingChangedListener =  e => this.temporaryBook.rating = e.detail.rating;\r\n    }\r\n\r\n    bind(){\r\n        this.resetTempBook(); \r\n        this.ratingElement.addEventListener(\"change\", this.ratingChangedListener);\r\n    }\r\n\r\n    editModeChanged(editModeNew, editModeOld){\r\n        if(editModeNew) this.resetTempBook();\r\n    }\r\n\r\n    @computedFrom('temporaryBook.title', 'temporaryBook.description', 'temporaryBook.rating')\r\n    get canSave(){\r\n        return this.temporaryBook && !_.isEqual(this.temporaryBook, this.book);\r\n    }\r\n\r\n    resetTempBook(){\r\n        this.temporaryBook = Object.assign({}, this.book);\r\n    }\r\n\r\n    cancel(){\r\n        this.temporaryBook = this.book;\r\n\r\n        this.starRatingViewModel.applyRating(this.temporaryBook.rating);\r\n\r\n        this.toggleEditMode();\r\n    }\r\n    \r\n    save(){\r\n        this.loading = true;\r\n        this.bookApi.saveBook(this.temporaryBook).then((savedBook) => {\r\n\r\n            this.loading = false;\r\n\r\n            this.saved = true;\r\n            setTimeout(() => {\r\n                this.saved = false;\r\n                this.publishBookSavedEvent();\r\n            }, 500);   \r\n        })\r\n    }\r\n\r\n    publishBookSavedEvent(){\r\n        this.eventAggregator.publish(`book-changed-${this.temporaryBook.Id}`, this.temporaryBook );\r\n        this.toggleEditMode();        \r\n    }\r\n\r\n    toggleEditMode(){\r\n        this.eventAggregator.publish('edit-mode-changed', !this.editMode );\r\n    }\r\n\r\n    detached(){\r\n        this.ratingElement.removeEventListener('change', this.ratingChangedListener);\r\n    }\r\n}","import {inject, bindable} from 'aurelia-framework';\r\n\r\n@inject(Element) // Inject the instance of this element\r\nexport class StarRating{\r\n    \r\n    @bindable rating;\r\n\r\n    constructor(element){\r\n\r\n        this.element = element;\r\n        this.stars = [\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false },\r\n                        { type: '-o', displayType: '-o', rated : false }\r\n                    ];\r\n\r\n        this.hovered = false;\r\n    }\r\n\r\n    bind(){\r\n        this.applyRating(this.rating);\r\n    }\r\n\r\n    applyRating(rating){\r\n        this.stars.forEach((star, index) => this.rateStar(star, rating, index));\r\n    }\r\n\r\n    rateStar(star, rating, index){\r\n \r\n        if(index < rating) this.toggleOn(star); //Toggle all of the stars on up to the current rating.\r\n        else {\r\n            this.toggleOff(star);\r\n        }\r\n        \r\n    }\r\n\r\n    toggleOn(star){\r\n        star.displayType = '';\r\n        star.type = '';\r\n        star.rated = true;\r\n    }\r\n\r\n    toggleOff(star){\r\n        star.displayType = '-o';\r\n        star.type = '-o';\r\n        star.rated = false;\r\n    }\r\n\r\n    ratingFromIndex(index, star){\r\n\r\n        if(index === 0 && star.rated) return 0;\r\n\r\n        return index + 1;\r\n\r\n    }\r\n\r\n    rate(index){\r\n\r\n        let rating = this.ratingFromIndex(index, this.stars[0]);\r\n\r\n        this.rating = rating;\r\n        \r\n        this.applyRating(rating);\r\n        \r\n        this.raiseChangedEvent();\r\n\r\n    }\r\n\r\n    mouseOut(hoverIndex){\r\n        \r\n        if(!this.hovered) return;\r\n\r\n        this.hovered = false;\r\n\r\n        this.applyHoverState(hoverIndex);\r\n       \r\n    }\r\n\r\n    applyHoverState(hoverIndex){\r\n         this.stars.forEach((star, index) =>{\r\n            if(!this.shouldApplyHover(index, hoverIndex, star)) return;\r\n\r\n            if(this.hovered){\r\n                this.toggleDisplayOn(star);\r\n            }\r\n            else{\r\n                 this.toggleDisplayOff(star);\r\n            }\r\n        }); \r\n    }\r\n\r\n    mouseOver(hoverIndex){\r\n        if(this.hovered) return;\r\n\r\n        this.hovered = true;\r\n\r\n        this.applyHoverState(hoverIndex);\r\n    }\r\n\r\n    toggleDisplayOff(star){\r\n        star.displayType = star.type; //Set the display back to the actual value.\r\n    }\r\n\r\n    toggleDisplayOn(star){\r\n        star.displayType = '';\r\n    }\r\n\r\n    shouldApplyHover(starIndex, hoverIndex, star){\r\n        return starIndex <= hoverIndex && !star.rated;\r\n    }\r\n\r\n    raiseChangedEvent(){\r\n        let changeEvent = {};\r\n        if (window.CustomEvent) {\r\n            changeEvent = new CustomEvent('change', {\r\n                detail: {\r\n                    rating: this.rating\r\n                },\r\n                bubbles: true\r\n            });\r\n        } \r\n        else {\r\n            changeEvent = document.createEvent('CustomEvent');\r\n            changeEvent.initCustomEvent('change', true, true, {\r\n                detail: {\r\n                    rating: this.rating\r\n                }\r\n            });\r\n        }\r\n        this.element.dispatchEvent(changeEvent);\r\n    }\r\n}","export class BookStatusValueConverter{\r\n    toView(value) {\r\n\r\n        switch(value){\r\n            case 'bad':\r\n                return 'fa-frown-o';\r\n            case 'good':\r\n                return 'fa-smile-o';\r\n            case 'ok':\r\n                return 'fa-meh-o';\r\n        }\r\n    \r\n    }\r\n}","import moment from 'moment';\r\n\r\nexport class DateFormatValueConverter {\r\n  toView(value) {\r\n    if(!value) return '';\r\n\r\n    return moment(value).format('MM/DD/YYYY h:mm:ss a');\r\n  }\r\n}"],"sourceRoot":".."}